<div class="bd-callout bd-callout-dark bg-light alert alert-dismissible fade show shadow-sm">
    <p><i class="bi bi-folder-fill pr-2" style="padding-right:8px;"></i>  Мэдээллийн санд нийт <strong>{{ total['tables'] }}</strong> хүснэгтэд <strong>{{ total['rows'] }}</strong> ширхэг файлын мэдээлэл байна</p>
    <p style="padding-left:25px">
        {% for name,count in tables %}
            [<a class="badge bg-primary" href="{{ 'files'|link }}?table={{ name|e }}">{{ name }} : {{ count }}</a>]
        {% else %}
            мэдээлэл олдсонгүй
        {% endfor %}
    </p>
</div>
{% set table = table ?? tables|keys|first %}
<div class="d-flex justify-content-between flex-wrap flex-md-nowrap align-items-center pb-4 mt-3">
    <h3 class="text-dark" style="padding-right:10px"><i class="bi bi-folder"></i> {{ table }}</h3>
</div>
<table class="table table-striped table-hover" id="files">
    <thead>
        <tr>
            <th>#</th>
            <th>{{ 'file'|text }}</th>
            <th>{{ 'size'|text }}</th>
            <th>{{ 'type'|text }}</th>
            <th>Mime</th>
            <th>Record</th>
            <th>{{ 'category'|text }}</th>
            <th>{{ 'keyword'|text }}</th>
            <th>{{ 'description'|text }}</th>
            <th style="width:160px">{{ 'action'|text }}</th>
        </tr>
    </thead>
    <tbody></tbody>
    <tfoot></tfoot>
</table>
<link href="https://cdn.datatables.net/1.12.1/css/dataTables.bootstrap5.min.css" rel="stylesheet">
<script defer src="https://code.jquery.com/jquery-3.6.0.min.js" integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous"></script>
<script defer src="https://cdn.datatables.net/1.12.1/js/jquery.dataTables.min.js"></script>
<script defer src="https://cdn.datatables.net/1.12.1/js/dataTables.bootstrap5.min.js"></script>
<script type="text/javascript">
    document.addEventListener('DOMContentLoaded', function () {
        let filesTable = document.querySelector('table#files');
        $(filesTable).DataTable({
            ajax: {method: 'GET', url: "{{ 'files-datatable'|link({'table':table}) }}"},
            lengthMenu: [[5, 10, 30, -1], [5, 10, 30, "{{ 'all'|text|e }}"]],
            responsive: true, bStateSave: true, pagingType: 'full_numbers', pageLength: 30, order: [[0, 'desc']]
            {% if localization.code == 'mn' %}, language: {url: 'https://cdn.datatables.net/plug-ins/1.11.3/i18n/mn.json'}{% endif %}
        });

        filesTable.onChildClick('.ajax-modal', function(a, e) {
            e.preventDefault();

            return AjaxModal.ajaxContent(a);
        });
    });
</script>
